--- Jour 8 : Colinéarité Résonante ---
Vous vous retrouvez sur le toit d'une installation top-secrète de lapin de Pâques.

Pendant que les Historiens font leur travail, vous jetez un œil à l’énorme antenne familière. À votre grande surprise, il semble avoir été reconfiguré pour émettre un signal qui rend les gens 0,1 % plus susceptibles d'acheter du chocolat imitation médiocre de la marque Easter Bunny comme cadeau de Noël ! Impensable!

En parcourant la ville, vous constatez qu’il existe en réalité de nombreuses antennes de ce type. Chaque antenne est réglée sur une fréquence spécifique indiquée par une seule lettre minuscule, une lettre majuscule ou un chiffre. Vous créez une carte (votre saisie de puzzle) de ces antennes. Par exemple:
............
........0...
.....0......
.......0....
....0.......
......A.....
............
............
........A...
.........A..
............
............

Le signal n’applique son effet néfaste qu’à des ventres spécifiques en fonction des fréquences de résonance des antennes. En particulier, un ventre se produit en tout point parfaitement aligné avec deux antennes de même fréquence - mais seulement lorsque l'une des antennes est deux fois plus éloignée que l'autre. Cela signifie que pour toute paire d’antennes ayant la même fréquence, il y a deux ventres, un de chaque côté.

Ainsi, pour ces deux antennes de fréquence a, ils créent les deux ventres marqués # :
..........
...#......
..........
....a.....
..........
.....a....
..........
......#...
..........
..........

L'ajout d'une troisième antenne avec la même fréquence crée plusieurs ventres supplémentaires. Idéalement, cela ajouterait quatre ventres, mais deux se trouvent sur le côté droit de la carte, donc à la place, il n'en ajoute que deux :
..........
...#......
#.........
....a.....
........a.
.....a....
..#.......
......#...
..........
..........

Les antennes avec des fréquences différentes ne créent pas de ventres ; A et a comptent pour des fréquences différentes. Cependant, des ventres peuvent apparaître à des endroits contenant des antennes. Dans ce diagramme, la seule antenne avec la capitale de fréquence A ne crée aucun ventre mais a un ventre de fréquence minuscule à son emplacement :
..........
...#......
#.........
....a.....
........a.
.....a....
..#.......
......A...
..........
..........

Le premier exemple comporte des antennes avec deux fréquences différentes, donc les ventres qu'elles créent ressemblent à ceci, plus un ventre chevauchant l'antenne de fréquence A la plus haute :
......#....#
...#....0...
....#0....#.
..#....0....
....0....#..
.#....A.....
...#........
#......#....
........A...
.........A..
..........#.
..........#.


Étant donné que l’antenne de fréquence A la plus haute chevauche un ventre de fréquence 0, il existe au total 14 emplacements uniques qui contiennent un ventre dans les limites de la carte.

Calculez l’impact du signal. Combien d’emplacements uniques dans les limites de la carte contiennent un ventre ?

--- Deuxième partie ---
Surveillant par-dessus votre épaule pendant que vous travaillez, l'un des historiens vous demande si vous avez pris en compte les effets des harmoniques résonnantes dans vos calculs.

Oups !

Après avoir mis à jour votre modèle, il s'avère qu'un ventre se produit à n'importe quelle position de la grille exactement en ligne avec au moins deux antennes de la même fréquence, quelle que soit la distance. Cela signifie que certains des nouveaux ventres apparaîtront à la position de chaque antenne (sauf si cette antenne est la seule à sa fréquence).

Ainsi, ces trois antennes à fréquence T créent désormais de nombreux ventres :
T....#....
...T......
.T....#...
.........#
..#.......
..........
...#......
..........
....#.....
..........

En fait, les trois antennes à fréquence T sont toutes exactement alignées avec deux antennes, elles sont donc toutes aussi des ventres ! Cela porte le nombre total de ventres dans l'exemple ci-dessus à 9.

L'exemple d'origine comporte désormais 34 ventres, y compris les ventres qui apparaissent sur chaque antenne :
##....#....#
.#.#....0...
..#.#0....#.
..##...0....
....0....#..
.#...#A....#
...#..#.....
#....#.#....
..#.....A...
....#....A..
.#........#.
...#......##


Calculez l'impact du signal à l'aide de ce modèle mis à jour. Combien d’emplacements uniques dans les limites de la carte contiennent un ventre ?
